<p id="notice"><%= notice %></p>
<div class="container">
  <h1>Administracion de tags de preferencia</h1>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th scope="col">Tag</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>

    <tbody>
      <% @users_preferences_tags.each do |users_preferences_tag| %>
        <% tag = Tag.find_by(id: users_preferences_tag.tag_id) %>
        <tr>
          <td><%= tag.name %></td>
          <td>
            <%= button_to users_preferences_tag, method: :delete, data: { confirm: 'Are you sure?'}, class:"btn btn-outline-danger"  do %>
              <i class="fas fa-trash-alt"></i>
            <% end %>
          </td>
        </tr>
      <% end %>
      <tr>
        <%= form_with(model: @preferences_tags, local: true) do |form|%>
          <% if @preferences_tags.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@preferences_tags.errors.count, "error") %> prohibited this users_preferences_tag from being saved:</h2>

              <ul>
                <% @preferences_tags.errors.each do |error| %>
                  <li><%= error.full_message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <td>
            <%= form.collection_select(:tag_id, @all_tags, :id, :name, {:prompt=>true}, {:class=>'form-control js-example-tags'}) %>
          </td>
          <td>
            <%= form.submit "Agregar tag", class: 'btn btn-primary' %>
          </td>
        <% end %>
      </tr>
    </tbody>
  </table>
  <br>
  <h1>Top tags</h1>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th scope="col">Temas</th>
        <th scope="col">Cantidad</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>

<script>
    $('.js-example-basic-single').select2();
    $(".js-example-tags").select2({
        tags: true
    });
</script>

<style>
    
    .table{
        background-color: white;
    }
</style>

